<div class="table-responsive">
    <table class="table table-striped table-hover">
        <thead>
            <tr>
                <th>Milestone</th>
                <th>Due Date</th>
                <th>Total Issues</th>
                <th>Closed Issues</th>
                <th>Completion</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
        {% for m in milestones %}
            <tr>
                <td>{{ m.title }}</td>
                <td>{{ m.due_date or 'N/A' }}</td>
                <td>{{ m.total_issues }}</td>
                <td>{{ m.closed_issues }}</td>
                <td>
                    {% if m.total_issues > 0 %}
                        {% set percentage = (m.closed_issues / m.total_issues * 100) | round(1) %}
                        <div class="progress" role="progressbar" aria-label="Completion" aria-valuenow="{{ percentage }}" aria-valuemin="0" aria-valuemax="100">
                            <div class="progress-bar" style="width: {{ percentage }}%">{{ percentage }}%</div>
                        </div>
                    {% else %}
                        N/A
                    {% endif %}
                </td>
                <td>
                    <a href="{{ url_for('main.download_detailed_milestone_report', group_id=group_id, milestone_id=m.id) }}" class="btn btn-sm btn-info" title="Download Detailed HTML Report">
                        <i class="bi bi-file-earmark-arrow-down"></i> Report
                    </a>
                </td>
            </tr>
        {% else %}
            <tr><td colspan="6" class="text-center">No milestones found in the selected date range.</td></tr>
        {% endfor %}
        </tbody>
    </table>
</div>
