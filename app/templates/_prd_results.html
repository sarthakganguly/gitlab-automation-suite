{% if ai_used %}
<div class="alert alert-info d-flex align-items-center" role="alert">
    <i class="bi bi-robot me-2"></i>
    <div>
        Generated with <strong>Generative AI</strong>. Please review for accuracy before creating issues.
    </div>
</div>
{% else %}
<div class="alert alert-secondary d-flex align-items-center" role="alert">
    <i class="bi bi-tools me-2"></i>
    <div>
        Generated using the rule-based story creator.
    </div>
</div>
{% endif %}

<h4>Generated User Stories</h4>
{% for story in stories %}
<div class="card mb-3 story-card" 
     data-title="{{ story.title }}" 
     data-description="{{ story.description ~ '\n\n**Acceptance Criteria:**\n' ~ story.acceptance_criteria }}"
     data-project-id="{{ project_id }}">
    <div class="card-body">
        <div class="d-flex justify-content-between">
            <h5 class="card-title mb-3">{{ story.title }}</h5>
            <button class="btn btn-sm btn-success create-issue-btn" style="height: fit-content;">Create Issue</button>
        </div>
        <p class="card-text">{{ story.description }}</p>
        
        <h6 class="mt-3">Acceptance Criteria</h6>
        <div class="bg-light p-3 rounded mb-3" style="white-space: pre-wrap;">{{ story.acceptance_criteria }}</div>

        <h6>Suggested Labels (editable, comma-separated)</h6>
        <div class="input-group">
            <input type="text" class="form-control form-control-sm suggested-labels-input" value="{{ story.suggested_labels|join(',') }}">
            <button class="btn btn-outline-secondary btn-sm clear-labels-btn" type="button" title="Clear labels">
                <i class="bi bi-x-lg"></i>
            </button>
        </div>
    </div>
</div>
{% else %}
<div class="alert alert-warning">Could not generate any stories from the provided text.</div>
{% endfor %}